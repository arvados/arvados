<% if @object.editable? %>
  <% content_for :tab_line_buttons do %>
    <%= link_to(choose_projects_path(
        id: "run-pipeline-button",
        title: 'Choose project',
        editable: true,
        action_name: 'Choose',
        action_href: pipeline_instances_path,
        action_method: 'post',
        action_data: {
          'selection_param' => 'pipeline_instance[owner_uuid]',
          'pipeline_instance[pipeline_template_uuid]' => @object.uuid,
          'pipeline_instance[description]' => "Created at #{Time.now.localtime}" + (@object.name.andand.size.andand>0 ? " using the pipeline template *#{@object.name}*" : ""),
          'success' => 'redirect-to-created-object',
        }.to_json), {
          class: "btn btn-primary btn-sm",
          remote: true,
          title: 'Run this pipeline'
        }) do %>
      <i class="fa fa-gear"></i> Run this pipeline
    <% end %>
  <% end %>
<% end %>

<%= render file: 'application/show.html.erb', locals: local_assigns %>
